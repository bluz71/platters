<% title("Platter - Albums") %>
<div class="row spacer-bottom-xs">
  <div id="albums">
    <div class="page-header">
      <%= index_page_header_text("Album", @albums) %>
    </div>

    <div class="list-choice text-center">
      <ul class="pagination pagination-sm">
        <li><%= link_to "All", albums_path %></li>
        <li><%= link_to "Random", albums_path(random: true) %></li>
        <% unless params.key?(:search) || params.key?(:random) %>
          <% ("A".."Z").each do |letter| %>
            <li data-behavior="album-letter-picker" class=<%= letter_activity(params, letter) %>><%= link_to letter, albums_path(add_letter(letter)) %></li>
          <% end %>
        <% end %>
        <li><a class="search-link" data-behavior="album-search-link">Search</a></li>
        <li><a class="filters-link" data-behavior="album-filters-link">Filters</a></li>
      </ul>
    </div>

    <%= render partial: "search/search", locals: {type: "album", path: albums_path} %>

    <div class="filters row" data-behavior="album-filters-form" hidden>
      <%= form_tag albums_path, method: :get, enforce_utf8: false, button: nil do %>
        <div class="form-group col-xs-2 col-md-offset-2 text-center">
          <%= label_tag :genre %>
          <%= select_tag :genre, options_from_collection_for_select(Genre.order(:name), :name, :name), {include_blank: "Choose", class: "form-control input-sm"} %>
        </div>
        <div class="form-group col-xs-2 text-center">
          <%= label_tag "Year(s)" %>
          <%= text_field_tag :year, nil, class: "form-control input-sm", placeholder: "2000, 2004..2008, 2010" %>
        </div>
        <div class="form-group col-xs-2">
          <div class="text-center">
            <%= label_tag :order %>
          </div>
          <div class="radio-inline spacer-right-xs">
            <label><%= radio_button_tag :order, :title %>Title</label>
          </div>
          <div class="radio-inline spacer-right-xs">
            <label><%= radio_button_tag :order, :genre %>Genre</label>
          </div>
          <div class="radio-inline">
            <label><%= radio_button_tag :order, :year %>Year</label>
          </div>
        </div>
        <div class="form-group col-xs-2">
          <div class="text-center">
            <%= label_tag :direction %>
          </div>
          <div class="checkbox">
            <label><%= check_box_tag :reversed %>Reverse</label>
          </div>
        </div>
        <div class="form-group col-xs-1 text-center">
          <%= button_tag "Select", class: "submit btn btn-success btn-sm", name: nil, data: {disable_with: "#{fa_icon('spinner spin')} Selecting..."} %>
        </div>
      <% end %>
    </div>

    <% if @albums.size == 0 %>
        <h4 class="text-center">No matching albums</h4>
    <% else %>
      <%= render partial: "album", collection: @albums %>
      <div class="col-md-12 no-left-padding">
        <%= paginate @albums %>
      </div>
    <% end %>
  </div>
</div>
